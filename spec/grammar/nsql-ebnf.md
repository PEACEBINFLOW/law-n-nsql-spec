# N-SQL Grammar (EBNF Form)

This grammar defines the legal syntax of N-SQL.

QUERY = SELECT_QUERY | OPTIMIZE_QUERY | INSPECT_QUERY | ANALYZE_QUERY ;

SELECT_QUERY = "SELECT" FIELD_LIST "FROM" TABLE_REF [ WHERE_CLAUSE ] ;
OPTIMIZE_QUERY = "OPTIMIZE" "ROUTE" DEVICE_REF "TO" DEVICE_REF
[ PREFERENCE_CLAUSE ] [ GOAL_CLAUSE ] ;

INSPECT_QUERY = "INSPECT" ( "FREQUENCY" FREQUENCY_VAL
| "TOWER" TOWER_ID
| "DEVICE" DEVICE_ID ) ;

ANALYZE_QUERY = "ANALYZE" "PATTERN" PATTERN_EXPR ;

FIELD_LIST = FIELD { "," FIELD } ;
TABLE_REF = IDENTIFIER ;
FIELD = IDENTIFIER ;
WHERE_CLAUSE = "WHERE" CONDITION { "AND" CONDITION } ;

CONDITION = FIELD OP VALUE | FIELD "MATCHES" PATTERN_EXPR ;
OP = "=" | "!=" | "<" | ">" | "<=" | ">=" ;

PREFERENCE_CLAUSE = "PREFER" PREFERENCE ;
PREFERENCE = IDENTIFIER "=" VALUE ;

GOAL_CLAUSE = "MINIMIZE" IDENTIFIER | "MAXIMIZE" IDENTIFIER ;

DEVICE_REF = STRING ;
DEVICE_ID = STRING ;
TOWER_ID = STRING ;
FREQUENCY_VAL = NUMBER ("GHz" | "MHz") ;
VALUE = STRING | NUMBER ;
PATTERN_EXPR = STRING ;
IDENTIFIER = ? letter or underscore followed by letters, digits, or underscores ? ;
STRING = """ { ? any char except quote ? } """ ;
NUMBER = DIGIT { DIGIT } [ "." DIGIT { DIGIT } ] ;
DIGIT = "0" | "1" | ... | "9" ;

yaml
Copy code
